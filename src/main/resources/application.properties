# Cấu hình kết nối cơ sở dữ liệu
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=job_dt;encrypt=true;trustServerCertificate=true;sendStringParametersAsUnicode=true;selectMethod=direct;TrustServerCertificate=true;loginTimeout=30;queryTimeout=30;sendTimeAsDatetime=false;cancelQueryTimeout=30;useFmtOnly=false;serverPreparedStatementDiscardThreshold=10;enablePrepareOnFirstPreparedStatementCall=false;useBulkCopyForBatchInsert=true;
spring.datasource.username=sa
spring.datasource.password=1234567
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

spring.application.name=demo

# Cấu hình JPA
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect
spring.jpa.properties.hibernate.format_sql=true
# Cấu hình encoding ký tự cho Hibernate - CỰC KỲ QUAN TRỌNG
spring.jpa.properties.hibernate.connection.useUnicode=true
spring.jpa.properties.hibernate.connection.characterEncoding=UTF-8
spring.jpa.properties.hibernate.jdbc.useUnicode=true
spring.jpa.properties.hibernate.jdbc.characterEncoding=UTF-8
# Cấu hình đặc biệt để xử lý Unicode trong SQL Server
spring.jpa.properties.hibernate.connection.SetBigStringTryClob=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.jdbc.fetch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_size=25
# Cấu hình collation cho Unicode
spring.jpa.properties.hibernate.connection.CharSet=UTF-8
spring.jpa.properties.hibernate.connection.url_charset=UTF-8

# Cấu hình server
server.port=8080

# Quan trọng: Thiết lập charset mặc định cho Servlet (và do đó là Jackson, Request, Response)
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Cấu hình upload file
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Cấu hình cache
spring.cache.type=none

# Cấu hình mã hóa mật khẩu
# spring.security.user.password.encoder=bcrypt

# Cho phép circular references để giải quyết vấn đề dependency
spring.main.allow-circular-references=true
# Cho phép override bean definition nếu cần
spring.main.allow-bean-definition-overriding=true

# Cấu hình đặc biệt cho JSON và HTTP xử lý UTF-8
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.time-zone=Asia/Ho_Chi_Minh

# Cấu hình JDBC đặc biệt để xử lý Unicode hoàn toàn
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=true

# JWT Secret
jwt.secret=mySecretKeyForDemoPurposesOnlyAndShouldBeChangedInProduction

# Cấu hình email (nếu cần)
#spring.mail.host=smtp.gmail.com
#spring.mail.port=587
#spring.mail.username=your_email@gmail.com
#spring.mail.password=your_app_password
#spring.mail.properties.mail.smtp.auth=true
#spring.mail.properties.mail.smtp.starttls.enable=true